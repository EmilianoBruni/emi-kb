<!DOCTYPE html>
<html lang="it">

<head>
    <title>Test emi-buttons component</title>

    <link rel='stylesheet' type='text/css' media='screen' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css' />
    <link rel='stylesheet' type='text/css' media='screen' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap-theme.min.css' />
    <link rel='stylesheet' type='text/css' media='screen' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css' />

    <script src='https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/knockback/1.2.2/knockback.min.js'></script>
    <script src='https://cdn.rawgit.com/EmilianoBruni/emi-kb/02465ede/emi.buttons.js'></script>

    <script>
        var vm = ko.observable();

        init();

        function init() {
            vm.subscribe(function(newVal) {
                console.log(newVal);
                newVal.on('save', function(event) {
                    vm().buttons.delete.visible(true);
                    vm().buttons.new.visible(true);
                });
                newVal.on('delete', function(event) {
                    vm().buttons.delete.visible(false);
                    vm().buttons.new.visible(false);
                });
                newVal.on('new', function(event) {
                    vm().buttons.delete.visible(false);
                    vm().buttons.new.visible(false);
                });
            })
        }
    </script>

</head>

<body>
    <div kb-inject>
        <emi-buttons params="visible: ['save'], view_model: vm"></emi-buttons>
    </div>
</body>

</html>